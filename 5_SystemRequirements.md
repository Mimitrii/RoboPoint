# 5. Требования к системе
## 5.1 Требования к системе в целом
### 5.1.1 Производительность
NFPER1 Система должна обслуживать до 5000 пользователей в день. Период пиковой активности с 11:00 до 17:00 по местному времени.

NFPER2 Все страницы мобильного приложения, должны полностью загружаться не более чем за 4 секунды после запроса их по интернет-подключению со скоростью 20 Мбит/сек.

NFPER3 Система должна выводить пользователю сообщение о подтверждении в среднем за 3 секунды и не более чем через 6 секунд после того, как пользователь отослал информацию системе.

NFPER4 Система должна обеспечивать пропускную цепочку 500 заказов в час на одной линии.

NFPER5 Сисетма должна быть укомплентована 4мя линиями конвеера:
- Холодный цех - сборка сендвичей, напитков и десертов; 
- Горячий цех - приготовление горячих блюд; 
- Цех сборки и подготовка к выдачи;
- Резервная 
на каждой линии 2 робота

### 5.1.2 Безопасность
NFSEC1 Система должна предусматривать аутентификацию пользователей в системе по номеру телефона и SMS или Push сообщению.

NFSEC2 Пользователи должны обязательно оплатить заказ до начала приготовления заказа.

NFSEC3 Система должна позволять авторизованным пользователям просматривать только заказы, размещенные ими лично, но не других пользоватей.


### 5.1.3 Надежность
NFROB1 Вероятность возникновения критической ошибки должна составлять не более 10% в течение месяца.

NFROB2 Если соединение между пользователем и системой разрывается до того, как заказ подтвержден, система должна позволять пользователю восстановить незавершенный заказ и продолжить работу.

NFROB3 База данных у каждой подсистемы самостоятельная, база данных у пунктов приема заказов централизованная.

### 5.1.4 Совместимость
NFCOM1 Мобильное приложение должно быть совместимо с ОС Android 5.0 или выше и iOS 10 или выше.

NFCOM2 Веб-приложение должно быть соместимо с браузерами, работающими на движках: Blink; Gecko; WebKit.

NFCOM3 Сисетма должна обеспечивать интеграцию со складом и бухгалтерией.

NFCOM4 Аналитика в приложении должна производиться с помощью сторонних сервисов.

### 5.1.5 Доступность
NFAVL1 Система должна быть доступна 98% времени, за исключением времени планового обслуживания(калибровка оборудования).

NFAVL2 Допустимое время простоя в сутки не более 30 минут.

### 5.1.7 Особенности хранения данных
NFDT1 Данные о сроках заказа должны храниться 365 дней с момента получения заказа клиентом.

NFDT2 Cрок хранения архивов - 3 года с последующем удалением.

NFDT3 Бекапы базы данных системы должны осуществляться раз в сутки. 


### 5.1.8 Концептуальная целостность
NFARC1 Система должна соответствовать архитектурному стилю REST.

NFARC2 Используемый стек технологий Java.

### 5.1.9 Поддерживаемость
NFSUP1 Необходимо логировать действия пользователей в системе. Просмотр данных логов должен осуществляться через графический интерфейс.

NFSUP2 Система должна обеспечивать мониторинг производительности с использованием графического интерфейса.


## 5.2 Требования к функциям (задачам), выполняемым системой
### 5.2.1 UseCase диаграмма
Основные функции системы представлены в виде UseCase диаграммы.

[DrawIO](UseCase.drawio)
![UseCaseDiagramm](images/UseCase.png)

### 5.2.2 Описание UseCase, реализуемых в рамках MVP

#### 5.2.2.1 Зарегистрироваться в системе

Название |UC-1: Зарегистрироваться в системе
| ------------- | ------------- |  
Краткое описание | Регистрация пользователя в мобильном приложении с целью последующего оформления заказа
Участники | 1. Пользователь
Предусловие | Пользователь зашел в приложение
Основной сценарий |1. Пользователь нажал на кнопку N1 <br> 2. Система открыла страницу регистрации в приложении <br> 3. Пользователь заполнил все обязательные поля и нажал кнопку N2 <br> 4. Система проверила, что пользователь заполнил все обязательные поля <br> 5. Система проверила, что введенный номер телефона ранее не использовался при регистрации <br> 6. Система проверила, что E-mail ранее не использовался при регистрации <br> 7. Система проверила, что пароли одинаковые <br> 8. Система отобразила страницу подтверждения регистрации по СМС <br> 9. Пользователь ввел полученный код из СМС <br> 10. Система проверила правильность введенного кода из СМС <br> 11. Система открыла странцу с выбором категорий меню.Конец сценария.
Альтернативный сценарий | AF1-3: Авторизация вместо регистрации. <br> 3.1. Пользователь нажал кнопку N20 <br> 3.2. Система отобразила страницу выбора авторизации или регистрации. Конец сценария.<br><br> AF1-4:Информация заполнена некорректно. <br> 4.1.Система вывела сообщение M1. Некорректно заполненная информация выделена красным цветом.  <br>  4.2.  Пользователь нажал кнопку N21  <br> 4.3. Переход к п.3 основного сценария. Конец сценария.<br><br> AF1-5:  Номер телефона уже существует в системе. <br> 5.1. Система вывела сообщение M2.Некорректно заполненная информация выделена красным цветом.  <br>  5.2.  Пользователь нажал кнопку N21  <br> 5.3. Переход к п.1 альтернативного сценария AF1-2. Конец сценария.<br><br> AF1-6: E-mail уже существует в системе. <br> 6.1. Система вывела сообщение M3. Некорректно заполненная информация выделена красным цветом.  <br>  6.2.  Пользователь нажал кнопку N21  <br> 6.3. Пользователь ввел новый E-mail и нажал кнопку N2 <br> 6.4. Переход к п.6 основного сценария. Конец сценария.<br><br> AF1-7:  Информация заполнена некорректно. <br> 7.1. Система вывела сообщение M4.Некорректно заполненная информация выделена красным цветом. <br>  7.2.  Пользователь нажал кнопку N21  <br> 7.3. Пользователь ввел в поля "Пароль" и "Повторить пароль" одинаковые значения и нажал кнопку N2 <br> 7.4. Переход к п.7 основного сценария. Конец сценария. <br><br> AF1-8: Корректировка данных на страницу регистрации в приложении  <br> 8.1.  Пользователь нажал кнопку N20 <br> 8.2. Система открыла страницу регистрации в приложении.Конец сценария.<br><br> AF1-9: Повторный запрос СМС <br> 9.1.  Пользователь нажал кнопку N3 <br> 9.2. Переход к п.9 основного сценария. Конец сценария.<br><br> AF1-10: Информация из СМС введена некорректно  <br> 10.1. Система вывела сообщение M5 <br> 10.2. Пользователь нажал кнопку N21  <br> 10.3. Пользователь ввел правильный код из СМС и нажал кнопку N2 <br> 10.4. Переход к п.10 основного сценария. Конец сценария.<br> 
Наименования элементов пользовательского интерфейса| N1: "Зарегестрироваться" <br> N2: "Зарегестрироваться" <br> N3: "Повторно отправить СМС" <br> N20: "Назад" <br> N21: "OK" <br> M1: "Пользователь не заполнил все обязательные поля" <br> M2: "Введенный номер телефона уже зарегистрирован" <br> M3: "Введенный E-mail уже зарегистрирован " <br> M4: "Введенные пароли отличаются" <br> M5: "Введенный код из СМС не правильный"


#### 5.2.2.2 Авторизоваться в системе

Название |UC-2: Авторизоваться в системе
| ------------- | ------------- |  
Краткое описание | Авторизация пользователя в мобильном приложении с целью последующего оформления заказа
Участники | 1. Пользователь 
Предусловие | 1. Пользователь зашел в приложение <br> 2. Пользователь зарегестрирован в системе [Перейти к UC-1](#5221-Зарегистрироваться-в-системе) 
Основной сценарий | 1. Пользователь нажал на кнопку 4 <br> 2. Система открыла страницу авторизации в приложении <br> 3. Пользователь заполнил номер телефона <br> 4. Пользователь ввел пароль <br> 5. Пользователь нажал кнопку N5 <br> 6. Система проверила указанный номер телефона и пароль <br> 7. Система открыла страницу с выбором категорий меню. Конец сценария.
Альтернативный сценарий |AF2-3:Восстановление пароля <br> 3.1.Пользователь нажал на кнопку N6 <br> 3.2. Система вывела диалоговое окно для ввода E-mail, указанного при регистрации <br> 3.3.Пользователь ввел E-mail и нажал кнопку N7 <br> 3.4.Система отправила новый пароль на указанный E-mail<br> 3.5. Переход к п.4 основного сценария. Конец сценария.<br><br> AF2-4: Использование E-mail для авторизации <br> 4.1. Пользователь ввел E-mail <br> 4.2. Переход к п.4 основного сценария. Конец сценария.<br><br> AF2-5:Информация введена некорректно <br> 5.1. Система вывела сообщение M6 <br> 5.2. Переход к п.3 основного сценария. Конец сценария.<br> 
Наименования элементов пользовательского интерфейса| N4: "Авторизоваться" <br> N5: "Войти" <br> N6: “Восстановить пароль” <br> N7: “Отправить” <br> M6: "Введен не правильный логин/пароль"


#### 5.2.2.3 Ознакомится с меню

Название |UC-3: Ознакомится с меню
| ------------- | ------------- |  
Краткое описание | Просмотр категорий меню и блюд входящих в эту категорию 
Участники | 1. Пользователь
Предусловие | 1. Пользователь зашел в приложение <br> 2. Пользователь авторизован в системе [Перейти к UC-2](#5222-Авторизоваться-в-системе) 
Основной сценарий | 1. Пользователь нажал на кнопку N8 <br> 2. Система открыла странцу с блюдами выбранной категории <br> 3. Пользователь в левой третей части экрана выбирал категорию блюд нажав кнопку N9 <br> 4. В правой части экрана в области выбора блюд в зависимости от выбранной категории, система отобразила блюда категории. Конец сценария.
Альтернативный сценарий| AF3-3: Альтернативный вариант просмотра меню <br> 3.1. Пользователь нажал на кнопку N20 <br> 3.2  Система открыла странцу выбора категорий меню <br> 3.3  Переход к п.1 основного сценария. Конец сценария.
Наименования элементов пользовательского интерфейса|N8: "Категория меню" <br> N9: "Категория меню" <br> N20: "Назад" .


#### 5.2.2.4 Сформировать корзину

Название |UC-4. Сформировать корзину
| ------------- | ------------- |  
Краткое описание | Выбор блюд пользователем для последующей покупки 
Участники | 1. Пользователь 
Предусловие |  1. Пользователь зашел в приложение <br> 2. Пользователь авторизован в системе [Перейти к UC-2](#5222-Авторизоваться-в-системе) 
Основной сценарий | 1. Пользователь нажал на кнопку N10  <br> 2. Система добавила выбранное блюдо в корзину, подсветила суммарное количество добавленных блюд над кнопкой N11 3. Система  расчитала итоговую стоймость <br> 4. Пользователь выполнил необходимое количество повторений п.1-п.3 <br> 5.  Пользователь нажал на кнопку N11 и открыл страницу корзины <br> 6.Система открыла страницу корзины <br> 7. Система отобразила добавленные блюда <br> 8. Система отобразила количество добавленных блюд <br> 9. Система расчитала итоговую стоймость заказа. Конец сценария. <br><br> 
Альтернативный сценарий| AF4-4a: Без просмотра корзины <br> 4a.1. Пользователь выполнил п.1-п.4 основного сценария. Конец сценария.<br><br> AF4-4b: Выбор максимального количества блюд <br> 4b.1. Пользователь выполнил п.1-п.4 основного сценария 99 раз <br> 4b.2. Система деактивировала кнопки N10. Конец сценария.<br><br> AF4-10a: Изменение количества блюд <br> 10a.1 Пользователь выполнил п.1-п.9 основного сценария <br> 10a.2 Пользователь изменил количество блюд кнопкой N12 или N13 <br> 10a.3 Система отобразила изменение количества блюда <br> 10a.4 Система отобразила изменение количества блюда <br> 10a.5 Система пересчитала итоговую стоймость заказа Конец сценария. <br><br> AF4-10b: Выбор максимального количества блюд <br> 10b.1 Пользователь выполнил п.1-п.9 основного сценария <br> 10b.2 Пользователь нажал на кнопку N12 99 раз <br> 10b.3 Система деактивировала кнопку N12. Конец сценария. <br><br> AF4-10c: Удаление всех блюд из корзины <br> 10c.1 Пользователь выполнил п.1-п.9 основного сценария <br> 10c.2 Пользователь нажал на кнопку N14 <br> 10c.3 Система удалила все блюда из корзины <br> 10c.4 Система обнулила итог Конец сценария. <br><br>  

Наименования элементов пользовательского интерфейса|N9: "Категория меню" <br> N10:"Блюдо" <br> N11:"Корзина" <br>  N12:"+" <br>  N13:"-" <br>  N14:"Очистить корзину" <br> N20: "Назад".
Диаграмма|


 #### 5.2.2.5 Проверить наличие ингредиентов на производстве

Название |UC-5: Проверить наличие ингредиентов на производстве
| ------------- | ------------- |  
Краткое описание | Выбор способа употребления пищи в приложении
Участники | 1. Пользователь   
Предусловие | 1. Пользователь зашел в приложение <br> 2. Пользователь сформировал корзину [Перейти к UC-4](#5224-Сформировать-корзину) 
Основной сценарий | 1. Пользователь нажал на кнопку N15 <br> 2. Система подтвердила наличие ингредиентов на складе <br> 3. Система открыла страницу выбора способа употребления пищи. Конец сценария.
Альтернативный сценарий| AF5-2a: Отсутствуют ингредиенты для выбранного блюда <br> 2a.1 Система уведомила об отсутствии ингредиентов на складе <br> 2a.2 Система предложила замену отсутствующего блюда <br> 2a.3 Пользователь нажал на кнопку N10 <br> 2a.4 Система добавила выбранное блюдо в корзину <br> 2a.5 Система удалила блюдо с отсутствующими ингредиентами <br> 2a.6 Переход к п.6 основного сценария UC-4[Перейти к UC-4](#5224-Сформировать-корзину). Конец сценария.<br><br> AF5-2b: Отсутствуют ингредиенты для выбранного блюда <br> 2b.1 Система уведомила об отсутствии ингредиентов на складе <br> 2b.2 Система предложила замену отсутствующего блюда <br> 2b.3 Пользователь нажал на кнопку N20 <br> 2b.4 Система удалила блюдо с отсутствующими ингредиентами <br> 2b.5 Переход к п.6 основного сценария UC-4[Перейти к UC-4](#5224-Сформировать-корзину). Конец сценария.<br><br>
Наименования элементов пользовательского интерфейса|N10:"Блюдо" <br> N15: "Оформить заказ" <br> N20: "Назад".
Диаграмма|

 #### 5.2.2.6 Выбрать способ употребления пищи

Название |UC-6: Выбрать способ употребления пищи 
| ------------- | ------------- |  
Краткое описание | Выбор способа употребления пищи в приложении
Участники |  1. Пользователь зашел в приложение <br> 2. Пользователь сформировал корзину
Предусловие | Пользователь авторизован в приложении
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 3. Пользователь нажал на кнопку N2 <br> 4.  Система открыла странцу с блюдами выбранной категории. Конец сценария.
Альтернативный сценарий| 3.1 Пользователь нажал на кнопку N3 <br> 3.2  Система открыла странцу с блюдами выбранной категории. Конец сценария.
Наименования элементов пользовательского интерфейса|N1: "Категория меню" <br> N2: "с собой"  <br> N3:"в зале".


#### 5.2.2.7 Выбрать способ употребления пищи

Название |UC-7: Произвести оплату
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 

#### 5.2.2.8 Уточнить время приготовления заказа

Название |UC-8: Уточнить время приготовления заказа
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 

#### 5.2.2.9 Уточнить время приготовления заказа

Название |UC-11: Получить информацию о готовности заказа на информационном табло
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 

### 5.2.3 Описание UseCase, реализуемых в рамках первого релиза 
#### 5.2.3.1 

Название |UC-9: Начислить баллы по программе лояльности
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 

#### 5.2.3.2 

Название |UC-10: Списать баллы по программе лояльности
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 

#### 5.2.3.3 

Название |UC 12: Повторить ранее оформленный заказ 
| ------------- | ------------- |  
Краткое описание | 
Участники | 1. Пользователь <br> 2. Система
Предусловие | Пользователь зашел в приложение
Основной сценарий | 1. Пользователь нажал на кнопку N1  <br> 2. Система вывела способы употребления пищи <br> 